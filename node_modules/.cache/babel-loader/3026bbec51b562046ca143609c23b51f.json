{"ast":null,"code":"var _jsxFileName = \"/home/wsaleh/portfolio/my-portfolio/src/components/Background/Background.js\";\nimport React from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction Background() {\n  const STAR_COUNT = (window.innerWidth + window.innerHeight) / 8,\n        STAR_SIZE = 3,\n        STAR_MIN_SCALE = 0.2,\n        OVERFLOW_THRESHOLD = 50;\n  const canvas = document.querySelector('canvas'),\n        context = canvas.getContext('2d');\n  let scale = 1,\n      // device pixel ratio\n  width,\n      height;\n  let stars = [];\n  let pointerX, pointerY;\n  let velocity = {\n    x: 0,\n    y: 0,\n    tx: 0,\n    ty: 0,\n    z: 0.0005\n  };\n  let touchInput = false;\n  generate();\n  resize();\n  step();\n  window.onresize = resize;\n  canvas.onmousemove = onMouseMove;\n  canvas.ontouchmove = onTouchMove;\n  canvas.ontouchend = onMouseLeave;\n  document.onmouseleave = onMouseLeave;\n\n  function generate() {\n    for (let i = 0; i < STAR_COUNT; i++) {\n      stars.push({\n        x: 0,\n        y: 0,\n        z: STAR_MIN_SCALE + Math.random() * (1 - STAR_MIN_SCALE)\n      });\n    }\n  }\n\n  function placeStar(star) {\n    star.x = Math.random() * width;\n    star.y = Math.random() * height;\n  }\n\n  function recycleStar(star) {\n    let direction = 'z';\n    let vx = Math.abs(velocity.x),\n        vy = Math.abs(velocity.y);\n\n    if (vx > 1 || vy > 1) {\n      let axis;\n\n      if (vx > vy) {\n        axis = Math.random() < vx / (vx + vy) ? 'h' : 'v';\n      } else {\n        axis = Math.random() < vy / (vx + vy) ? 'v' : 'h';\n      }\n\n      if (axis === 'h') {\n        direction = velocity.x > 0 ? 'l' : 'r';\n      } else {\n        direction = velocity.y > 0 ? 't' : 'b';\n      }\n    }\n\n    star.z = STAR_MIN_SCALE + Math.random() * (1 - STAR_MIN_SCALE);\n\n    if (direction === 'z') {\n      star.z = 0.1;\n      star.x = Math.random() * width;\n      star.y = Math.random() * height;\n    } else if (direction === 'l') {\n      star.x = -OVERFLOW_THRESHOLD;\n      star.y = height * Math.random();\n    } else if (direction === 'r') {\n      star.x = width + OVERFLOW_THRESHOLD;\n      star.y = height * Math.random();\n    } else if (direction === 't') {\n      star.x = width * Math.random();\n      star.y = -OVERFLOW_THRESHOLD;\n    } else if (direction === 'b') {\n      star.x = width * Math.random();\n      star.y = height + OVERFLOW_THRESHOLD;\n    }\n  }\n\n  function resize() {\n    scale = window.devicePixelRatio || 1;\n    width = window.innerWidth * scale;\n    height = window.innerHeight * scale;\n    canvas.width = width;\n    canvas.height = height;\n    stars.forEach(placeStar);\n  }\n\n  function step() {\n    context.clearRect(0, 0, width, height);\n    update();\n    render();\n    requestAnimationFrame(step);\n  }\n\n  function update() {\n    velocity.tx *= 0.96;\n    velocity.ty *= 0.96;\n    velocity.x += (velocity.tx - velocity.x) * 0.8;\n    velocity.y += (velocity.ty - velocity.y) * 0.8;\n    stars.forEach(star => {\n      star.x += velocity.x * star.z;\n      star.y += velocity.y * star.z;\n      star.x += (star.x - width / 2) * velocity.z * star.z;\n      star.y += (star.y - height / 2) * velocity.z * star.z;\n      star.z += velocity.z; // recycle when out of bounds\n\n      if (star.x < -OVERFLOW_THRESHOLD || star.x > width + OVERFLOW_THRESHOLD || star.y < -OVERFLOW_THRESHOLD || star.y > height + OVERFLOW_THRESHOLD) {\n        recycleStar(star);\n      }\n    });\n  }\n\n  function render() {\n    stars.forEach(star => {\n      context.beginPath();\n      context.lineCap = 'round';\n      context.lineWidth = STAR_SIZE * star.z * scale;\n      context.strokeStyle = 'rgba(255,255,255,' + (0.5 + 0.5 * Math.random()) + ')';\n      context.beginPath();\n      context.moveTo(star.x, star.y);\n      var tailX = velocity.x * 2,\n          tailY = velocity.y * 2; // stroke() wont work on an invisible line\n\n      if (Math.abs(tailX) < 0.1) tailX = 0.5;\n      if (Math.abs(tailY) < 0.1) tailY = 0.5;\n      context.lineTo(star.x + tailX, star.y + tailY);\n      context.stroke();\n    });\n  }\n\n  function movePointer(x, y) {\n    if (typeof pointerX === 'number' && typeof pointerY === 'number') {\n      let ox = x - pointerX,\n          oy = y - pointerY;\n      velocity.tx = velocity.tx + ox / 8 * scale * (touchInput ? 1 : -1);\n      velocity.ty = velocity.ty + oy / 8 * scale * (touchInput ? 1 : -1);\n    }\n\n    pointerX = x;\n    pointerY = y;\n  }\n\n  function onMouseMove(event) {\n    touchInput = false;\n    movePointer(event.clientX, event.clientY);\n  }\n\n  function onTouchMove(event) {\n    touchInput = true;\n    movePointer(event.touches[0].clientX, event.touches[0].clientY, true);\n    event.preventDefault();\n  }\n\n  function onMouseLeave() {\n    pointerX = null;\n    pointerY = null;\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(\"canvas\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 4\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 197,\n    columnNumber: 3\n  }, this);\n}\n\n_c = Background;\nexport default Background;\n\nvar _c;\n\n$RefreshReg$(_c, \"Background\");","map":{"version":3,"sources":["/home/wsaleh/portfolio/my-portfolio/src/components/Background/Background.js"],"names":["React","Background","STAR_COUNT","window","innerWidth","innerHeight","STAR_SIZE","STAR_MIN_SCALE","OVERFLOW_THRESHOLD","canvas","document","querySelector","context","getContext","scale","width","height","stars","pointerX","pointerY","velocity","x","y","tx","ty","z","touchInput","generate","resize","step","onresize","onmousemove","onMouseMove","ontouchmove","onTouchMove","ontouchend","onMouseLeave","onmouseleave","i","push","Math","random","placeStar","star","recycleStar","direction","vx","abs","vy","axis","devicePixelRatio","forEach","clearRect","update","render","requestAnimationFrame","beginPath","lineCap","lineWidth","strokeStyle","moveTo","tailX","tailY","lineTo","stroke","movePointer","ox","oy","event","clientX","clientY","touches","preventDefault"],"mappings":"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","sourcesContent":["import React from 'react';\n\nfunction Background() {\n\tconst STAR_COUNT = (window.innerWidth + window.innerHeight) / 8,\n\t\tSTAR_SIZE = 3,\n\t\tSTAR_MIN_SCALE = 0.2,\n\t\tOVERFLOW_THRESHOLD = 50;\n\n\tconst canvas = document.querySelector('canvas'),\n\t\tcontext = canvas.getContext('2d');\n\n\tlet scale = 1, // device pixel ratio\n\t\twidth,\n\t\theight;\n\n\tlet stars = [];\n\n\tlet pointerX, pointerY;\n\n\tlet velocity = { x: 0, y: 0, tx: 0, ty: 0, z: 0.0005 };\n\n\tlet touchInput = false;\n\n\tgenerate();\n\tresize();\n\tstep();\n\n\twindow.onresize = resize;\n\tcanvas.onmousemove = onMouseMove;\n\tcanvas.ontouchmove = onTouchMove;\n\tcanvas.ontouchend = onMouseLeave;\n\tdocument.onmouseleave = onMouseLeave;\n\n\tfunction generate() {\n\t\tfor (let i = 0; i < STAR_COUNT; i++) {\n\t\t\tstars.push({\n\t\t\t\tx: 0,\n\t\t\t\ty: 0,\n\t\t\t\tz: STAR_MIN_SCALE + Math.random() * (1 - STAR_MIN_SCALE),\n\t\t\t});\n\t\t}\n\t}\n\n\tfunction placeStar(star) {\n\t\tstar.x = Math.random() * width;\n\t\tstar.y = Math.random() * height;\n\t}\n\n\tfunction recycleStar(star) {\n\t\tlet direction = 'z';\n\n\t\tlet vx = Math.abs(velocity.x),\n\t\t\tvy = Math.abs(velocity.y);\n\n\t\tif (vx > 1 || vy > 1) {\n\t\t\tlet axis;\n\n\t\t\tif (vx > vy) {\n\t\t\t\taxis = Math.random() < vx / (vx + vy) ? 'h' : 'v';\n\t\t\t} else {\n\t\t\t\taxis = Math.random() < vy / (vx + vy) ? 'v' : 'h';\n\t\t\t}\n\n\t\t\tif (axis === 'h') {\n\t\t\t\tdirection = velocity.x > 0 ? 'l' : 'r';\n\t\t\t} else {\n\t\t\t\tdirection = velocity.y > 0 ? 't' : 'b';\n\t\t\t}\n\t\t}\n\n\t\tstar.z = STAR_MIN_SCALE + Math.random() * (1 - STAR_MIN_SCALE);\n\n\t\tif (direction === 'z') {\n\t\t\tstar.z = 0.1;\n\t\t\tstar.x = Math.random() * width;\n\t\t\tstar.y = Math.random() * height;\n\t\t} else if (direction === 'l') {\n\t\t\tstar.x = -OVERFLOW_THRESHOLD;\n\t\t\tstar.y = height * Math.random();\n\t\t} else if (direction === 'r') {\n\t\t\tstar.x = width + OVERFLOW_THRESHOLD;\n\t\t\tstar.y = height * Math.random();\n\t\t} else if (direction === 't') {\n\t\t\tstar.x = width * Math.random();\n\t\t\tstar.y = -OVERFLOW_THRESHOLD;\n\t\t} else if (direction === 'b') {\n\t\t\tstar.x = width * Math.random();\n\t\t\tstar.y = height + OVERFLOW_THRESHOLD;\n\t\t}\n\t}\n\n\tfunction resize() {\n\t\tscale = window.devicePixelRatio || 1;\n\n\t\twidth = window.innerWidth * scale;\n\t\theight = window.innerHeight * scale;\n\n\t\tcanvas.width = width;\n\t\tcanvas.height = height;\n\n\t\tstars.forEach(placeStar);\n\t}\n\n\tfunction step() {\n\t\tcontext.clearRect(0, 0, width, height);\n\n\t\tupdate();\n\t\trender();\n\n\t\trequestAnimationFrame(step);\n\t}\n\n\tfunction update() {\n\t\tvelocity.tx *= 0.96;\n\t\tvelocity.ty *= 0.96;\n\n\t\tvelocity.x += (velocity.tx - velocity.x) * 0.8;\n\t\tvelocity.y += (velocity.ty - velocity.y) * 0.8;\n\n\t\tstars.forEach((star) => {\n\t\t\tstar.x += velocity.x * star.z;\n\t\t\tstar.y += velocity.y * star.z;\n\n\t\t\tstar.x += (star.x - width / 2) * velocity.z * star.z;\n\t\t\tstar.y += (star.y - height / 2) * velocity.z * star.z;\n\t\t\tstar.z += velocity.z;\n\n\t\t\t// recycle when out of bounds\n\t\t\tif (\n\t\t\t\tstar.x < -OVERFLOW_THRESHOLD ||\n\t\t\t\tstar.x > width + OVERFLOW_THRESHOLD ||\n\t\t\t\tstar.y < -OVERFLOW_THRESHOLD ||\n\t\t\t\tstar.y > height + OVERFLOW_THRESHOLD\n\t\t\t) {\n\t\t\t\trecycleStar(star);\n\t\t\t}\n\t\t});\n\t}\n\n\tfunction render() {\n\t\tstars.forEach((star) => {\n\t\t\tcontext.beginPath();\n\t\t\tcontext.lineCap = 'round';\n\t\t\tcontext.lineWidth = STAR_SIZE * star.z * scale;\n\t\t\tcontext.strokeStyle =\n\t\t\t\t'rgba(255,255,255,' + (0.5 + 0.5 * Math.random()) + ')';\n\n\t\t\tcontext.beginPath();\n\t\t\tcontext.moveTo(star.x, star.y);\n\n\t\t\tvar tailX = velocity.x * 2,\n\t\t\t\ttailY = velocity.y * 2;\n\n\t\t\t// stroke() wont work on an invisible line\n\t\t\tif (Math.abs(tailX) < 0.1) tailX = 0.5;\n\t\t\tif (Math.abs(tailY) < 0.1) tailY = 0.5;\n\n\t\t\tcontext.lineTo(star.x + tailX, star.y + tailY);\n\n\t\t\tcontext.stroke();\n\t\t});\n\t}\n\n\tfunction movePointer(x, y) {\n\t\tif (typeof pointerX === 'number' && typeof pointerY === 'number') {\n\t\t\tlet ox = x - pointerX,\n\t\t\t\toy = y - pointerY;\n\n\t\t\tvelocity.tx = velocity.tx + (ox / 8) * scale * (touchInput ? 1 : -1);\n\t\t\tvelocity.ty = velocity.ty + (oy / 8) * scale * (touchInput ? 1 : -1);\n\t\t}\n\n\t\tpointerX = x;\n\t\tpointerY = y;\n\t}\n\n\tfunction onMouseMove(event) {\n\t\ttouchInput = false;\n\n\t\tmovePointer(event.clientX, event.clientY);\n\t}\n\n\tfunction onTouchMove(event) {\n\t\ttouchInput = true;\n\n\t\tmovePointer(event.touches[0].clientX, event.touches[0].clientY, true);\n\n\t\tevent.preventDefault();\n\t}\n\n\tfunction onMouseLeave() {\n\t\tpointerX = null;\n\t\tpointerY = null;\n\t}\n\n\treturn (\n\t\t<div>\n\t\t\t<canvas></canvas>\n\t\t</div>\n\t);\n}\n\nexport default Background;\n"]},"metadata":{},"sourceType":"module"}